<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Icons in Mermaid - Example</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
        
        // Register AWS icon pack
        // Replace with your GitHub raw URL after publishing
        mermaid.registerIconPacks([
            {
                name: 'aws',
                loader: () =>
                    fetch('https://raw.githubusercontent.com/harmalh/aws-mermaid-icons/main/iconify-json/aws-icons.json')
                        .then((res) => {
                            if (!res.ok) {
                                throw new Error(`HTTP error! status: ${res.status}`);
                            }
                            return res.json();
                        })
                        .catch((error) => {
                            console.error('Failed to load AWS icons:', error);
                            // Fallback: return empty pack
                            return { prefix: 'aws', icons: {} };
                        }),
            },
        ]);
        
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
        });
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 { color: #232f3e; }
        .diagram-container {
            margin: 30px 0;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>AWS Icons in Mermaid Architecture Diagrams</h1>
    
    <div class="diagram-container">
        <h2>Example 1: Simple Architecture</h2>
        <div class="mermaid">
        architecture-beta
            group frontend(aws:aws)[Frontend] {
                service amplify(aws:aws-amplify)[Amplify]
                service cloudfront(aws:amazon-cloudfront)[CloudFront]
            }
            
            group compute(aws:aws)[Compute] {
                service lambda(aws:aws-lambda)[Lambda]
                service ec2(aws:aws-ec2)[EC2]
                service ecs(aws:amazon-ecs)[ECS]
            }
            
            group storage(aws:aws)[Storage] {
                service s3(aws:amazon-simple-storage-service)[S3]
                service rds(aws:amazon-rds)[RDS]
                service dynamodb(aws:amazon-dynamodb)[DynamoDB]
            }
            
            amplify --> cloudfront
            cloudfront --> lambda
            lambda --> ec2
            lambda --> ecs
            ec2 --> s3
            ecs --> rds
            lambda --> dynamodb
        </div>
    </div>
    
    <div class="diagram-container">
        <h2>Example 2: Data Pipeline</h2>
        <div class="mermaid">
        architecture-beta
            group data-ingestion(aws:aws)[Data Ingestion] {
                service kinesis(aws:amazon-kinesis)[Kinesis]
                service firehose(aws:amazon-data-firehose)[Firehose]
            }
            
            group processing(aws:aws)[Processing] {
                service glue(aws:aws-glue)[Glue]
                service emr(aws:amazon-emr)[EMR]
            }
            
            group analytics(aws:aws)[Analytics] {
                service athena(aws:amazon-athena)[Athena]
                service redshift(aws:amazon-redshift)[Redshift]
                service quicksight(aws:amazon-quicksight)[QuickSight]
            }
            
            kinesis --> firehose
            firehose --> glue
            glue --> emr
            emr --> athena
            athena --> redshift
            redshift --> quicksight
        </div>
    </div>
    
    <div class="diagram-container">
        <h2>Example 3: Serverless Application</h2>
        <div class="mermaid">
        architecture-beta
            group api(aws:aws)[API Layer] {
                service apigateway(aws:amazon-api-gateway)[API Gateway]
            }
            
            group functions(aws:aws)[Functions] {
                service lambda1(aws:aws-lambda)[Lambda 1]
                service lambda2(aws:aws-lambda)[Lambda 2]
            }
            
            group data(aws:aws)[Data Layer] {
                service dynamodb(aws:amazon-dynamodb)[DynamoDB]
                service s3(aws:amazon-simple-storage-service)[S3]
            }
            
            group messaging(aws:aws)[Messaging] {
                service sns(aws:amazon-sns)[SNS]
                service sqs(aws:amazon-sqs)[SQS]
            }
            
            apigateway --> lambda1
            apigateway --> lambda2
            lambda1 --> dynamodb
            lambda2 --> s3
            lambda1 --> sns
            sns --> sqs
        </div>
    </div>
    
    <div class="diagram-container">
        <h2>Example 4: Machine Learning Pipeline</h2>
        <div class="mermaid">
        architecture-beta
            group ml-services(aws:aws)[ML Services] {
                service sagemaker(aws:amazon-sagemaker)[SageMaker]
                service bedrock(aws:amazon-bedrock)[Bedrock]
                service rekognition(aws:amazon-rekognition)[Rekognition]
            }
            
            group storage(aws:aws)[Storage] {
                service s3(aws:amazon-simple-storage-service)[S3]
            }
            
            group compute(aws:aws)[Compute] {
                service lambda(aws:aws-lambda)[Lambda]
            }
            
            s3 --> sagemaker
            s3 --> bedrock
            s3 --> rekognition
            sagemaker --> lambda
            bedrock --> lambda
            rekognition --> lambda
        </div>
    </div>
    
    <div class="diagram-container">
        <h2>Example 5: Security & Compliance</h2>
        <div class="mermaid">
        architecture-beta
            group security(aws:aws)[Security Services] {
                service iam(aws:aws-iam)[IAM]
                service kms(aws:aws-kms)[KMS]
                service secrets(aws:aws-secrets-manager)[Secrets Manager]
                service shield(aws:aws-shield)[Shield]
                service waf(aws:aws-waf)[WAF]
            }
            
            group monitoring(aws:aws)[Monitoring] {
                service cloudwatch(aws:amazon-cloudwatch)[CloudWatch]
                service cloudtrail(aws:aws-cloudtrail)[CloudTrail]
            }
            
            iam --> kms
            kms --> secrets
            shield --> waf
            cloudtrail --> cloudwatch
        </div>
    </div>
</body>
</html>

